{# templates/dashboard/overview.html.twig #}
{% extends 'base.dashboard.html.twig' %}

{% block title %}Dashboard – Overview{% endblock %}

{% block content %}
{# <div class="min-h-screen bg-base-100 text-base-content"> #}
  {# NAVBAR #}
  {# <header class="navbar bg-secondary">
    <div class="navbar-start">

    </div>
    <div class="navbar-end gap-3">
      <span class="hidden sm:inline opacity-80">Olá, {{ app.user.email }}</span>
      <a href="{{ path('app_logout') }}" class="btn btn-error btn-sm md:btn-md">Sair</a>
    </div>
  </header> #}

  {# <main class="container mx-auto px-4 py-6"> #}

    {# TABS HEADER #}
    {# <div role="tablist" class="tabs tabs-box bg-base-300 w-fit">
      <button role="tab" class="tab tab-active" aria-selected="true">Overview</button>
      <button role="tab" class="tab">Engajamento</button>
      <button role="tab" class="tab">Audiência</button>
      <button role="tab" class="tab">Conteudo</button>
      <button role="tab" class="tab">Comparação</button>
    </div> #}

    {# TAB PANELS ----------------------------------------------------------- #}

    {# OVERVIEW #}
    <section class="space-y-6">

        {# --- KPIs / Stats --- #}
        {% if totals %}
        <div class="stats stats-vertical lg:stats-horizontal w-full card-theme">
            <div class="stat">
            <div class="stat-title">Likes (Dia)</div>
            <div class="stat-value">{{ totals.likes|number_format(0, ',', '.') }}</div>
            </div>
            <div class="stat">
            <div class="stat-title">Comentários (Dia)</div>
            <div class="stat-value">{{ totals.comments|number_format(0, ',', '.') }}</div>
            </div>
            <div class="stat">
            <div class="stat-title">Visualizações (Dia)</div>
            <div class="stat-value">{{ totals.views|number_format(0, ',', '.') }}</div>
            </div>
            <div class="stat">
            <div class="stat-title">Seguidores</div>
            <div class="stat-value">{{ totals.followers.total|number_format(0, ',', '.') }}</div>
            <div class="stat-desc text-success">+{{ totals.followers.new_today|number_format(0, ',', '.') }} hoje</div>
            </div>
            <div class="stat">
            <div class="stat-title">Menções (Dia)</div>
            <div class="stat-value">{{ totals.mentions|default(0)|number_format(0, ',', '.') }}</div>
            </div>
        </div>
        {% else %}
        <div class="alert alert-warning">
            <span>Sem dados de totais para hoje.</span>
        </div>
        {% endif %}

        {# --- Donuts principais: Likes / Comentários / Visualizações por rede --- #}
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <div class="card card-theme">
            <div class="card-body p-4">
            <h2 class="card-title">Likes por Rede</h2>
            <div class="mt-2">
                {{ render_chart(likesChart) }}
            </div>
            </div>
        </div>

        <div class="card card-theme">
            <div class="card-body p-4">
            <h2 class="card-title">Comentários por Rede</h2>
            <div class="mt-2">
                {{ render_chart(commentsChart) }}
            </div>
            </div>
        </div>

        <div class="card card-theme ">
            <div class="card-body p-4">
            <h2 class="card-title">Visualizações por Rede</h2>
            <div class="mt-2">
                {{ render_chart(viewsChart) }}
            </div>
            </div>
        </div>
        </div>

        {# --- Sentimento & Hashtags --- #}
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div class="card card-theme">
              <div class="card-body p-4">
              <h2 class="card-title">Sentimento do Dia</h2>
              <div class="mt-2">
                  {{ render_chart(sentimentChart) }}
              </div>
              </div>
          </div>

          <div class="card card-theme">
              <div class="card-body p-4">
              <h2 class="card-title">Top Hashtags</h2>
              <div class="mt-2">
                  {{ render_chart(hashtagsChart) }}
              </div>
              </div>
          </div>
        </div>

    </section>

    {# ENGAJAMENTO #}
    <section class="mt-6 hidden" role="tabpanel">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div class="card bg-base-200 shadow">
          <div class="card-body p-4">
            <h2 class="card-title">Engajamento por Rede (Empilhado)</h2>
            <div class="h-72 flex items-center justify-center opacity-60">[gráfico aqui]</div>
          </div>
        </div>
        <div class="card bg-base-200 shadow">
          <div class="card-body p-4">
            <h2 class="card-title">Taxa de Engajamento (%)</h2>
            <div class="h-72 flex items-center justify-center opacity-60">[gráfico aqui]</div>
          </div>
        </div>
      </div>
      <div class="card bg-base-200 shadow mt-6">
        <div class="card-body p-4">
          <h2 class="card-title">Evolução do Engajamento (7–30 dias)</h2>
          <div class="h-72 flex items-center justify-center opacity-60">[gráfico aqui]</div>
        </div>
      </div>
    </section>

    {# AUDIÊNCIA #}
    <section class="mt-6 hidden" role="tabpanel">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div class="card bg-base-200 shadow">
          <div class="card-body p-4">
            <h2 class="card-title">Crescimento de Seguidores</h2>
            <div class="h-72 flex items-center justify-center opacity-60">[gráfico aqui]</div>
          </div>
        </div>
        <div class="card bg-base-200 shadow">
          <div class="card-body p-4">
            <h2 class="card-title">Distribuição de Views por Rede</h2>
            <div class="h-72 flex items-center justify-center opacity-60">[gráfico aqui]</div>
          </div>
        </div>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-6">
        <div class="card bg-base-200 shadow">
          <div class="card-body p-4">
            <h2 class="card-title">Regiões</h2>
            <div class="h-64 flex items-center justify-center opacity-60">[mapa/donut/barras]</div>
          </div>
        </div>
        <div class="card bg-base-200 shadow">
          <div class="card-body p-4">
            <h2 class="card-title">Faixa Etária</h2>
            <div class="h-64 flex items-center justify-center opacity-60">[barras/stacked]</div>
          </div>
        </div>
        <div class="card bg-base-200 shadow">
          <div class="card-body p-4">
            <h2 class="card-title">Gênero</h2>
            <div class="h-64 flex items-center justify-center opacity-60">[donut]</div>
          </div>
        </div>
      </div>
    </section>

    {# CONTEÚDO #}
    <section class="mt-6 hidden" role="tabpanel">
      <div class="card bg-base-200 shadow">
        <div class="card-body p-4">
          <div class="flex items-center justify-between">
            <h2 class="card-title">Top Posts</h2>
            <div class="join hidden md:flex">
              <button class="btn btn-sm join-item btn-ghost">Hoje</button>
              <button class="btn btn-sm join-item btn-ghost">7 dias</button>
              <button class="btn btn-sm join-item btn-ghost">30 dias</button>
            </div>
          </div>

          <div class="overflow-x-auto mt-2">
            <table class="table table-zebra">
              <thead>
                <tr>
                  <th>Rede</th>
                  <th>Título</th>
                  <th class="text-right">Views</th>
                  <th class="text-right">Likes</th>
                  <th class="text-right">Comentários</th>
                  <th class="text-right">Compart.</th>
                  <th class="text-right">Salvos</th>
                </tr>
              </thead>
              <tbody>
                <tr><td colspan="7" class="text-center opacity-60">[tabela aqui]</td></tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6">
        <div class="card bg-base-200 shadow">
          <div class="card-body p-4">
            <h2 class="card-title">Eficiência por Post (Likes vs Views)</h2>
            <div class="h-72 flex items-center justify-center opacity-60">[scatter aqui]</div>
          </div>
        </div>
        <div class="card bg-base-200 shadow">
          <div class="card-body p-4">
            <h2 class="card-title">Engajamento por Tema</h2>
            <div class="h-72 flex items-center justify-center opacity-60">[barras/donut aqui]</div>
          </div>
        </div>
      </div>

      <div class="card bg-base-200 shadow mt-6">
        <div class="card-body p-4">
          <h2 class="card-title">Melhores Horários de Postagem</h2>
          <div class="h-64 flex items-center justify-center opacity-60">[heatmap/linha aqui]</div>
        </div>
      </div>
    </section>

    {# COMPARAÇÃO #}
    <section class="mt-6 hidden" role="tabpanel">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div class="card bg-base-200 shadow">
          <div class="card-body p-4">
            <h2 class="card-title">Distribuição do Engajamento</h2>
            <div class="h-64 flex items-center justify-center opacity-60">[donut aqui]</div>
          </div>
        </div>
        <div class="card bg-base-200 shadow">
          <div class="card-body p-4">
            <h2 class="card-title">Eficiência por Rede (Bubble)</h2>
            <div class="h-64 flex items-center justify-center opacity-60">[bubble aqui]</div>
          </div>
        </div>
      </div>

      <div class="card bg-base-200 shadow mt-6">
        <div class="card-body p-4">
          <h2 class="card-title">Benchmark com Pares</h2>
          <div class="h-64 flex items-center justify-center opacity-60">[tabela/gráfico aqui]</div>
        </div>
      </div>
    </section>
  {# </main> #}
{# </div> #}
{% endblock %}
